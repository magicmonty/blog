<!DOCTYPE html>
<html lang="en" itemscope itemtype="http://schema.org/Blog">
  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width">

  <meta itemprop="name" content="Monty's Sammelsurium">
  <meta property="og:site_name" content="Monty's Sammelsurium">

  
    <meta property="og:title" content="Monty's Sammelsurium - A fable of Web MIDI">
    <title>Monty's Sammelsurium - A fable of Web MIDI</title>
  

  
    <meta name="description" content="Ideas, Jokes and everything else…" />
    <meta itemprop="description" content="Ideas, Jokes and everything else…">
    <meta property="og:description" content="Ideas, Jokes and everything else…">
  

  
    <meta itemprop="image" content="/img/logo.png">
    <meta property="og:image" content="/img/logo.png">
  

  <meta name="xing:author" content="//www.xing.com/profile/Martin_Gondermann">

  <link rel="alternate" href="/feed.xml" type="application/rss+xml" title="Ideas, Jokes and everything else…">
  <link rel="alternate" href="/atom.xml" type="application/atom+xml" title="Ideas, Jokes and everything else…" />
  <link rel="stylesheet" href="/css/bootstrap.min.css">
  <link rel="stylesheet" href="/css/highlighter.css">
  <link rel="stylesheet" href="/css/style.css">
  <link rel="shortcut icon" href="/img/favicon.ico">
  <link rel="me" href="https://mastodon.social/@magicmonty">
  <link rel="amphtml" href="http://blog.pagansoft.de/amp/articles/a-fable-of-webmidi">

  <script src="/js/lib/moment.min.js"></script>
  <script src="/js/lib/lunr.min.js"></script>
  <script src="/js/lib/jquery-2.2.3.min.js"></script>
  <script src="/js/lib/bootstrap.min.js"></script>
  <link rel="stylesheet" type="text/css" href="//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.0.3/cookieconsent.min.css" />
<script src="//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.0.3/cookieconsent.min.js"></script>
<script>
window.addEventListener("load", function(){
window.cookieconsent.initialise({
  "palette": {
    "popup": {
      "background": "#363636",
      "text": "#eaefc0"
    },
    "button": {
      "background": "#a9bf04",
      "text": "#363636"
    }
  },
  "theme": "classic"
})});
</script>

</head>

  <body>
    
    
    
    <div class="container full-width">
      <div class="row">
        <header class="col-md-12 logo">Ideas, Jokes and everything else…</header>
      </div>
      <div class="row social-icons">
        <div class="col-md-3">
          <ul class="list-unstyled media">
            <li><a href="/feed.xml" data-toggle="tooltip" rel="me" target="_blank" title="RSS feed" class="icon social-icons-rss"><span>RSS feed</span></a>
              <li><a href="https://keybase.io/magicmonty" data-toggle="tooltip" rel="me" target="_blank" title="Public Keys" class="icon social-icons-keybase"><span>Public Keys</span></a>
              <li><a href="http://twitter.com/magicmonty/" data-toggle="tooltip" rel="me" target="_blank" title="Twitter feed" class="icon social-icons-twitter"><span>Twitter feed</span></a>
              <li><a href="https://mastodon.social/@magicmonty" data-toggle="tooltip" rel="me" target="_blank" title="Mastodon" class="icon social-icons-mastodon"><span>Mastodon</span></a>
              </ul>
        </div>
        <div class="col-md-6"></div>
        <div class="col-md-3">
          <ul class="list-unstyled media">
            <li><a href="https://www.linkedin.com/in/martingondermann" data-toggle="tooltip" rel="me" target="_blank" title="LinkedIn profile" class="icon social-icons-linkedin"><span>LinkedIn profile</span></a>
              <li><a href="http://www.xing.com/profile/Martin_Gondermann" data-toggle="tooltip" rel="me" target="_blank" title="Xing profile" class="icon social-icons-xing"><span>Xing profile</span></a>
              <li><a href="https://github.com/magicmonty" data-toggle="tooltip" rel="me" target="_blank" title="GitHub profile" class="icon social-icons-github"><span>GitHub profile</span></a>
              <li><a href="https://coderwall.com/magicmonty" data-toggle="tooltip" rel="me" target="_blank" title="CoderWall profile" class="icon social-icons-coderwall"><span>CoderWall profile</span></a>
              
          </ul>
        </div>
      </div>
      <div class="row social-icons si-tablet">
        <div class="col-md-12">
          <ul class="list-unstyled media">
            <li><a href="/feed.xml" data-toggle="tooltip" rel="me" target="_blank" title="RSS feed" class="icon social-icons-rss"><span>RSS feed</span></a>
              <li><a href="https://keybase.io/magicmonty" data-toggle="tooltip" rel="me" target="_blank" title="Public Keys" class="icon social-icons-keybase"><span>Public Keys</span></a>
              <li><a href="http://twitter.com/magicmonty/" data-toggle="tooltip" rel="me" target="_blank" title="Twitter feed" class="icon social-icons-twitter"><span>Twitter feed</span></a>
              <li><a href="https://mastodon.social/@magicmonty" data-toggle="tooltip" rel="me" target="_blank" title="Mastodon" class="icon social-icons-mastodon"><span>Mastodon</span></a>
              <li><a href="https://coderwall.com/magicmonty" data-toggle="tooltip" rel="me" target="_blank" title="CoderWall profile" class="icon social-icons-coderwall"><span>CoderWall profile</span></a>
              <li><a href="https://github.com/magicmonty" data-toggle="tooltip" rel="me" target="_blank" title="GitHub profile" class="icon social-icons-github"><span>GitHub profile</span></a>
              <li><a href="http://www.xing.com/profile/Martin_Gondermann" data-toggle="tooltip" rel="me" target="_blank" title="Xing profile" class="icon social-icons-xing"><span>Xing profile</span></a>
              <li><a href="https://www.linkedin.com/in/martingondermann" data-toggle="tooltip" rel="me" target="_blank" title="LinkedIn profile" class="icon social-icons-linkedin"><span>LinkedIn profile</span></a>
              
          </ul>
        </div>
      </div>
      <div class="row social-icons si-phone">
        <div class="col-md-12">
          <ul class="list-unstyled media">
            <li><a href="/feed.xml" title="RSS feed" class="icon social-icons-small-rss" data-toggle="tooltip" rel="me" target="_blank"><span>RSS feed</span></a>
              <li><a href="https://keybase.io/magicmonty" title="Public Keys" class="icon social-icons-small-keybase" data-toggle="tooltip" rel="me" target="_blank"><span>Public Keys</span></a>
              <li><a href="http://twitter.com/magicmonty/" title="Twitter feed" class="icon social-icons-small-twitter" data-toggle="tooltip" rel="me" target="_blank"><span>Twitter feed</span></a>
              <li><a href="https://mastodon.social/@magicmonty" title="Mastodon" class="icon social-icons-small-mastodon" data-toggle="tooltip" rel="me" target="_blank"><span>Mastodon</span></a>
              <li><a href="https://coderwall.com/magicmonty" title="CoderWall profile" class="icon social-icons-small-coderwall" data-toggle="tooltip" rel="me" target="_blank"><span>CoderWall profile</span></a>
              <li><a href="https://github.com/magicmonty" title="GitHub profile" class="icon social-icons-small-github" data-toggle="tooltip" rel="me" target="_blank"><span>GitHub profile</span></a>
              <li><a href="http://www.xing.com/profile/Martin_Gondermann" title="Xing profile" class="icon social-icons-small-xing" data-toggle="tooltip" rel="me" target="_blank"><span>Xing profile</span></a>
              <li><a href="https://www.linkedin.com/in/martingondermann" title="LinkedIn profile" class="icon social-icons-small-linkedin" data-toggle="tooltip" rel="me" target="_blank"><span>LinkedIn profile</span></a>
              
          </ul>
        </div>
      </div>
      <div class="row main">
        <div id="sidebar_left" class="col-md-3 col-sm-12 col-xs-12 sidebar">
          <nav>
  <ul>
    <li><a href="/"><i class="glyphicon glyphicon-home glyphicon-white"></i> Home</a>
    <li><a href="/pages/about.html"><i class="glyphicon glyphicon-user glyphicon-white"></i> About me</a>
    <li><a href="/pages/impressum.html"><i class="glyphicon glyphicon-briefcase glyphicon-white"></i> Impressum</a>
    <li><a href="/search.html"><i class="glyphicon glyphicon-search glyphicon-white"></i> Search</a>
    
  </ul>
</nav>

          <div class="widget hidden-sm hidden-xs">
  <h3>Categories</h3>
  <div class="content">
    <div class="tagcloud">
      <a href="/categories/.net.html" class="set-1">.Net</a> <a href="/categories/accesscontrol.html" class="set-4">AccessControl</a> <a href="/categories/active-directory.html" class="set-1">Active Directory</a> <a href="/categories/air.html" class="set-1">Air</a> <a href="/categories/ant.html" class="set-1">Ant</a> <a href="/categories/apache.html" class="set-1">Apache</a> <a href="/categories/authentication.html" class="set-1">Authentication</a> <a href="/categories/autotest.html" class="set-1">Autotest</a> <a href="/categories/blackberry.html" class="set-1">BlackBerry</a> <a href="/categories/centos.html" class="set-1">CentOS</a> <a href="/categories/delphi.html" class="set-1">Delphi</a> <a href="/categories/development.html" class="set-1">Development</a> <a href="/categories/elmish.html" class="set-1">Elmish</a> <a href="/categories/fsharp.html" class="set-1">FSharp</a> <a href="/categories/fable.html" class="set-1">Fable</a> <a href="/categories/freenx.html" class="set-1">FreeNX</a> <a href="/categories/git.html" class="set-1">Git</a> <a href="/categories/github.html" class="set-1">GitHub</a> <a href="/categories/how-to.html" class="set-1">How-To</a> <a href="/categories/howto.html" class="set-2">HowTo</a> <a href="/categories/linux.html" class="set-2">Linux</a> <a href="/categories/midi.html" class="set-1">MIDI</a> <a href="/categories/mediawiki.html" class="set-4">MediaWiki</a> <a href="/categories/playbook.html" class="set-1">PlayBook</a> <a href="/categories/react.html" class="set-1">React</a> <a href="/categories/ssl.html" class="set-1">SSL</a> <a href="/categories/screencast.html" class="set-3">Screencast</a> <a href="/categories/software-craftsmanship.html" class="set-5">Software Craftsmanship</a> <a href="/categories/software-projects.html" class="set-5">Software-Projects</a> <a href="/categories/tdd.html" class="set-1">TDD</a> <a href="/categories/tools.html" class="set-1">Tools</a>
    </div>
  </div>
</div>

          <div class="widget visible-md hidden-xs hidden-sm hidden-lg">
  <h3>Github repositories</h3>
  <div class="content">
    <div class="github-repos">
      <ul>
        <li><a href="http://github.com/magicmonty/sonicpi.nvim" title="sonicpi.nvim" rel="popover" data-placement="top" data-trigger="hover" data-content="A neovim plugin for Sonic Pi" class="github_link" target="_blank">sonicpi.nvim</a>
        <li><a href="http://github.com/magicmonty/SharpFun" title="SharpFun" rel="popover" data-placement="top" data-trigger="hover" data-content="Functional Data Types for C#" class="github_link" target="_blank">SharpFun</a>
        <li><a href="http://github.com/magicmonty/bash-git-prompt" title="bash-git-prompt" rel="popover" data-placement="top" data-trigger="hover" data-content="An informative and fancy bash prompt for Git users" class="github_link" target="_blank">bash-git-prompt</a>
        <li><a href="http://github.com/magicmonty/FizzBuzzKata-csharp" title="FizzBuzzKata-csharp" rel="popover" data-placement="top" data-trigger="hover" data-content="FizzBuzz kata project for Xamarin Studio" class="github_link" target="_blank">FizzBuzzKata-csharp</a>
        <li><a href="http://github.com/magicmonty/gildedrose_kata_monodevelop" title="gildedrose_kata_monodevelop" rel="popover" data-placement="top" data-trigger="hover" data-content="Start project for the Gilded Rose Kata for MonoDevelop" class="github_link" target="_blank">gildedrose_kata_monodevelop</a>
        <li><a href="http://github.com/magicmonty/wintersmith-uglifyjs" title="wintersmith-uglifyjs" rel="popover" data-placement="top" data-trigger="hover" data-content="Plugin for Wintersmith, which combines and compresses all configured js files into a single file" class="github_link" target="_blank">wintersmith-uglifyjs</a>
        <li><a href="http://github.com/magicmonty/marsrover-kata-delphi" title="marsrover-kata-delphi" rel="popover" data-placement="top" data-trigger="hover" data-content="Mars Rover Kata in Delphi" class="github_link" target="_blank">marsrover-kata-delphi</a>
        <li><a href="http://github.com/magicmonty/activesync-go" title="activesync-go" rel="popover" data-placement="top" data-trigger="hover" data-content="ActiveSync implementation for Google Go" class="github_link" target="_blank">activesync-go</a>
        <li><a href="http://github.com/magicmonty/wbxml-go" title="wbxml-go" rel="popover" data-placement="top" data-trigger="hover" data-content="WBXML encoder/decoder implementation for Google Go" class="github_link" target="_blank">wbxml-go</a>
        <li><a href="http://github.com/magicmonty/autotest4delphi" title="autotest4delphi" rel="popover" data-placement="top" data-trigger="hover" data-content="Application to run DUnit tests automatically on change" class="github_link" target="_blank">autotest4delphi</a>
        <li><a href="http://github.com/magicmonty/gildedrose_kata_delphi" title="gildedrose_kata_delphi" rel="popover" data-placement="top" data-trigger="hover" data-content="Start project for the Gilded Rose Kata in Delphi" class="github_link" target="_blank">gildedrose_kata_delphi</a>
        <li><a href="http://github.com/magicmonty/videostore_delphi" title="videostore_delphi" rel="popover" data-placement="top" data-trigger="hover" data-content="The videostore example from Martin Fowler's Refactoring, and from Episode 3 of cleancoders.com in Delphi" class="github_link" target="_blank">videostore_delphi</a>
        <li><a href="http://github.com/magicmonty/MediaWikiAccessControl" title="MediaWikiAccessControl" rel="popover" data-placement="top" data-trigger="hover" data-content="Group based AccessControl for selected MediaWiki pages" class="github_link" target="_blank">MediaWikiAccessControl</a>
        
      </ul>
    </div>
  </div>
</div>

          <div class="widget visible-md hidden-xs hidden-sm hidden-lg">
  <h3>Links</h3>
  <div class="content">
    <ul class="links">
      <li><a href="http://lambdaphonic.de" data-toggle="tooltip" target="_blank" title="λphonic">λphonic</a>
      <li><a href="http://www.softwerkskammer.de" data-toggle="tooltip" target="_blank" title="Softwerkskammer">Softwerkskammer</a>
      <li><a href="http://www.torstenpahl.de" data-toggle="tooltip" target="_blank" title="Torsten Pahl - Zauberkünstler">Torsten Pahl - Zauberkünstler</a>
      
    </ul>
  </div>
</div>

        </div>
        <div id="content" class="col-lg-6 col-md-9 col-sm-12 col-xs-12">
          <article>
  <header>
    <h1>A fable of Web MIDI</h1>
  </header>
  <div class="content">
  <p>This post is part of the <a href="https://sergeytihon.com/2017/10/22/f-advent-calendar-in-english-2017/" rel="nofollow" target="_blank">F# Advent Calendar 2017</a> series.</p>

<p>In this post I describe how to create useful <a href="http://fable.io" rel="nofollow" target="_blank">Fable</a> bindings for <a href="https://www.w3.org/TR/webmidi/" rel="nofollow" target="_blank">Web MIDI</a> and use them in a Fable-Elmish-React application.</p>

<h2 id="tldr">TL;DR</h2>

<p>It’s quite easy to write Javascript bindings for <a href="http://fable.io" rel="nofollow" target="_blank">Fable</a>
The resulting output can be found here:</p>

<ul>
  <li><a href="https://github.com/magicmonty/fable-webmidi-sample" rel="nofollow" target="_blank">Sample app</a></li>
  <li><a href="https://github.com/magicmonty/volca-fm-editor" rel="nofollow" target="_blank">Volca FM Patch editor</a></li>
  <li>Fable bindings for Web MIDI
    <ul>
      <li><a href="https://github.com/magicmonty/fable-import-webmidi" rel="nofollow" target="_blank">Project</a></li>
      <li><a href="https://www.nuget.org/packages/Fable.Import.WebMIDI/" rel="nofollow" target="_blank">NuGet Package</a></li>
    </ul>
  </li>
</ul>

<!-- more -->

<h2 id="prerequisites">Prerequisites</h2>

<p>Before we start we need to get a new Fable application up and running.</p>

<p>Install the Fable Template</p>

<div class="highlight"><pre><code>$ dotnet new -i Fable.Template
</code></pre></div>

<p>Create a new Project and change into project directory</p>

<div class="highlight"><pre><code class="language-sh">$ dotnet new fable -n volca
$ <span class="nb">cd</span> volca</code></pre></div>

<p>Since we want to create a Fable Elmish app add the following entries to the <code>paket.dependencies</code>:</p>

<div class="highlight"><pre><code>nuget Fable.Elmish.Browser
nuget Fable.Elmish.Debugger
nuget Fable.Elmish.React
nuget Fable.Elmish.HMR
</code></pre></div>

<p>then add the following entries to <code>src/paket.references</code>:</p>

<div class="highlight"><pre><code>Fable.Elmish.Browser
Fable.Elmish.Debugger
Fable.Elmish.React
Fable.Elmish.HMR
</code></pre></div>

<p>now install all yarn and .NET dependencies</p>

<div class="highlight"><pre><code class="language-sh">$ yarn add react react-dom
$ <span class="nb">cd</span> src
$ mono ../.paket/paket.exe install
$ dotnet restore</code></pre></div>

<p>Update the file <code>public/index.html</code>, so that it looks like this:</p>

<div class="highlight"><pre><code class="language-html"><span class="cp">&lt;!doctype html&gt;</span>
<span class="p">&lt;</span><span class="nt">html</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>MIDI test<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">http-equiv</span><span class="o">=</span><span class="s">'Content-Type'</span> <span class="na">content</span><span class="o">=</span><span class="s">'text/html; charset=utf-8'</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">name</span><span class="o">=</span><span class="s">"viewport"</span> <span class="na">content</span><span class="o">=</span><span class="s">"width=device-width, initial-scale=1"</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">link</span> <span class="na">rel</span><span class="o">=</span><span class="s">"shortcut icon"</span> <span class="na">href</span><span class="o">=</span><span class="s">"fable.ico"</span> <span class="p">/&gt;</span>
  <span class="p">&lt;</span><span class="nt">link</span> <span class="na">rel</span><span class="o">=</span><span class="s">"stylesheet"</span> <span class="na">href</span><span class="o">=</span><span class="s">"https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/css/bootstrap.min.css"</span> <span class="na">integrity</span><span class="o">=</span><span class="s">"sha384-PsH8R72JQ3SOdhVi3uxftmaW6Vc51MKb0q5P2rRUpPvrszuE4W1povHYgTpBfshb"</span> <span class="na">crossorigin</span><span class="o">=</span><span class="s">"anonymous"</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nt">body</span> <span class="na">class</span><span class="o">=</span><span class="s">"app-container"</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">"midi-app"</span> <span class="na">class</span><span class="o">=</span><span class="s">"midi-app"</span> <span class="p">/&gt;</span>
  <span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="o">=</span><span class="s">"bundle.js"</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>

<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span></code></pre></div>

<p>You can now open the project folder in Visual Studio Code (with the Ionide plugins installed) and run the following in the integrated terminal:</p>

<div class="highlight"><pre><code class="language-sh">$ <span class="nb">cd</span> src
$ dotnet fable yarn-start</code></pre></div>

<p>Now lets code.</p>

<p>What we want is an app which can handle MIDI Inputs and MIDI outputs and can send and receive MIDI messages via <a href="https://www.w3.org/TR/webmidi/" rel="nofollow" target="_blank">Web MIDI</a>.</p>

<h2 id="building-the-ui">Building the UI</h2>

<p>First we need a model. We want a list of inputs, a list of outputs, the possibility to select either of them
and the reference to the <a href="https://www.w3.org/TR/webmidi/#midiaccess-interface" rel="nofollow" target="_blank">MIDIAccess</a> object, which we
fill in later.</p>

<p><em>Please note, Web MIDI currently works only in Chrome!</em></p>

<div class="highlight"><pre><code class="language-fsharp"><span class="k">module</span> <span class="nn">MidiTest</span>

<span class="k">type</span> <span class="nc">MIDIAccess</span> <span class="o">=</span> <span class="kt">obj</span>

<span class="k">type</span> <span class="nc">Alert</span> <span class="o">=</span>
  <span class="o">|</span> <span class="n">Info</span> <span class="k">of</span> <span class="kt">string</span>
  <span class="o">|</span> <span class="n">Success</span> <span class="k">of</span> <span class="kt">string</span>
  <span class="o">|</span> <span class="n">Warning</span> <span class="k">of</span> <span class="kt">string</span>
  <span class="o">|</span> <span class="n">Error</span> <span class="k">of</span> <span class="kt">string</span>

<span class="k">type</span> <span class="nc">Model</span> <span class="o">=</span>  <span class="o">{</span> <span class="n">MIDIOutputs</span><span class="o">:</span> <span class="o">(</span><span class="kt">string</span><span class="o">*</span><span class="kt">string</span><span class="o">)</span> <span class="kt">list</span>
                <span class="n">SelectedMIDIOutput</span><span class="o">:</span> <span class="kt">string</span> <span class="n">option</span>
                <span class="n">MIDIAccess</span><span class="o">:</span> <span class="n">MIDIAccess</span> <span class="n">option</span>
                <span class="n">IsMIDIEnabled</span><span class="o">:</span> <span class="kt">bool</span>
                <span class="n">Messages</span><span class="o">:</span> <span class="n">Alert</span> <span class="kt">list</span> <span class="o">}</span></code></pre></div>

<p>For now we need some basic messages, which handle the UI state:</p>

<div class="highlight"><pre><code class="language-fsharp"><span class="k">type</span> <span class="nc">Msg</span> <span class="o">=</span>
  <span class="o">|</span> <span class="n">MIDIConnected</span> <span class="k">of</span> <span class="n">IMIDIAccess</span>     <span class="c1">// MIDI successfully connected</span>
  <span class="o">|</span> <span class="n">MIDIStateChange</span>                  <span class="c1">// MIDI ports have changed</span>
  <span class="o">|</span> <span class="n">MIDIError</span> <span class="k">of</span> <span class="kt">exn</span>                 <span class="c1">// Error connecting MIDI</span>
  <span class="o">|</span> <span class="n">Message</span> <span class="k">of</span> <span class="n">Alert</span>                 <span class="c1">// A message</span>
  <span class="o">|</span> <span class="n">OutputSelected</span> <span class="k">of</span> <span class="kt">string</span>
  <span class="o">|</span> <span class="n">SendNote</span>                        <span class="c1">// Send a MIDI note</span></code></pre></div>

<p>Now we can initialize our model:</p>

<div class="highlight"><pre><code class="language-fsharp"><span class="k">open</span> <span class="nn">Elmish</span>
<span class="k">open</span> <span class="nn">Fable.Import</span>
<span class="k">open</span> <span class="nn">Fable.Core.JsInterop</span>

<span class="k">let</span> <span class="nv">init</span> <span class="bp">()</span> <span class="o">:</span> <span class="n">Model</span><span class="o">*</span><span class="n">Cmd</span><span class="o">&lt;</span><span class="n">Msg</span><span class="o">&gt;</span> <span class="o">=</span>
    <span class="o">{</span> <span class="n">MIDIOutputs</span> <span class="o">=</span> <span class="bp">[]</span>
      <span class="n">SelectedMIDIOutput</span> <span class="o">=</span> <span class="n">None</span>
      <span class="n">MIDIAccess</span> <span class="o">=</span> <span class="n">None</span>
      <span class="n">IsMIDIEnabled</span> <span class="o">=</span> <span class="k">false</span>
      <span class="n">Messages</span> <span class="o">=</span> <span class="bp">[]</span> <span class="o">},</span> <span class="nn">Cmd</span><span class="p">.</span><span class="n">none</span></code></pre></div>

<p>The <code>update</code> function updates the model based on the received message:</p>

<div class="highlight"><pre><code class="language-fsharp"><span class="k">let</span> <span class="nv">update</span> <span class="o">(</span><span class="n">msg</span><span class="o">:</span><span class="n">Msg</span><span class="o">)</span> <span class="o">(</span><span class="n">model</span><span class="o">:</span><span class="n">Model</span><span class="o">)</span> <span class="o">:</span> <span class="n">Model</span><span class="o">*</span><span class="n">Cmd</span><span class="o">&lt;</span><span class="n">Msg</span><span class="o">&gt;</span> <span class="o">=</span>
    <span class="k">let</span> <span class="nv">success</span> <span class="o">=</span> <span class="n">Success</span> <span class="o">&gt;&gt;</span> <span class="n">Message</span> <span class="o">&gt;&gt;</span> <span class="nn">Cmd</span><span class="p">.</span><span class="n">ofMsg</span>
    <span class="k">let</span> <span class="nv">info</span> <span class="o">=</span> <span class="n">Info</span> <span class="o">&gt;&gt;</span> <span class="n">Message</span> <span class="o">&gt;&gt;</span> <span class="nn">Cmd</span><span class="p">.</span><span class="n">ofMsg</span>
    <span class="k">let</span> <span class="nv">error</span> <span class="o">=</span> <span class="n">Error</span> <span class="o">&gt;&gt;</span> <span class="n">Message</span> <span class="o">&gt;&gt;</span> <span class="nn">Cmd</span><span class="p">.</span><span class="n">ofMsg</span>

    <span class="k">match</span> <span class="n">msg</span> <span class="k">with</span>
    <span class="o">|</span> <span class="n">MIDIConnected</span> <span class="n">midiAccess</span> <span class="o">-&gt;</span>
        <span class="o">{</span> <span class="n">model</span> <span class="k">with</span> <span class="n">MIDIAccess</span> <span class="o">=</span> <span class="n">Some</span> <span class="n">midiAccess</span>
                     <span class="n">IsMIDIEnabled</span> <span class="o">=</span> <span class="k">true</span> <span class="o">},</span> <span class="nn">Cmd</span><span class="p">.</span><span class="n">batch</span> <span class="o">[</span> <span class="n">success</span> <span class="s">"MIDI connected"</span>
                                                         <span class="nn">Cmd</span><span class="p">.</span><span class="n">ofMsg</span> <span class="n">MIDIStateChange</span> <span class="o">]</span>
    <span class="o">|</span> <span class="n">MIDIStateChange</span> <span class="o">-&gt;</span> <span class="n">model</span><span class="o">,</span> <span class="n">info</span> <span class="s">"State changed"</span>
    <span class="o">|</span> <span class="n">MIDIError</span> <span class="n">ex</span> <span class="o">-&gt;</span>
        <span class="o">{</span> <span class="n">model</span> <span class="k">with</span> <span class="n">MIDIAccess</span> <span class="o">=</span> <span class="n">None</span>
                     <span class="n">MIDIOutputs</span> <span class="o">=</span> <span class="bp">[]</span>
                     <span class="n">IsMIDIEnabled</span> <span class="o">=</span> <span class="k">false</span>
                     <span class="n">SelectedMIDIOutput</span> <span class="o">=</span> <span class="n">None</span>  <span class="o">},</span> <span class="n">error</span> <span class="n">ex</span><span class="o">.</span><span class="n">Message</span>
    <span class="o">|</span> <span class="n">Message</span> <span class="n">alert</span> <span class="o">-&gt;</span> <span class="o">{</span> <span class="n">model</span> <span class="k">with</span> <span class="n">Messages</span> <span class="o">=</span> <span class="n">alert</span> <span class="o">::</span> <span class="n">model</span><span class="o">.</span><span class="n">Messages</span> <span class="o">|&gt;</span> <span class="nn">List</span><span class="p">.</span><span class="n">truncate</span> <span class="mi">5</span> <span class="o">},</span> <span class="nn">Cmd</span><span class="p">.</span><span class="n">none</span>
    <span class="o">|</span> <span class="n">OutputSelected</span> <span class="n">id</span> <span class="o">-&gt;</span>
        <span class="o">{</span> <span class="n">model</span> <span class="k">with</span> <span class="n">SelectedMIDIOutput</span> <span class="o">=</span> <span class="k">match</span> <span class="n">id</span> <span class="k">with</span>
                                          <span class="o">|</span> <span class="s">""</span> <span class="o">-&gt;</span> <span class="n">None</span>
                                          <span class="o">|</span> <span class="n">id</span> <span class="o">-&gt;</span> <span class="n">Some</span> <span class="n">id</span> <span class="o">},</span> <span class="nn">Cmd</span><span class="p">.</span><span class="n">none</span>
    <span class="o">|</span> <span class="n">SendNote</span> <span class="o">-&gt;</span> <span class="n">model</span><span class="o">,</span> <span class="n">info</span> <span class="s">"TBD: Note on"</span></code></pre></div>

<p>Last but not least we need a view:</p>

<div class="highlight"><pre><code class="language-fsharp"><span class="k">open</span> <span class="nn">Fable.Helpers.React</span>
<span class="k">open</span> <span class="nn">Fable.Helpers.React.Props</span>

<span class="k">let</span> <span class="nv">view</span> <span class="n">model</span> <span class="n">dispatch</span> <span class="o">=</span>
    <span class="n">div</span> <span class="o">[</span> <span class="n">ClassName</span> <span class="s">"container"</span> <span class="o">]</span> <span class="o">[</span>
        <span class="n">div</span> <span class="o">[</span> <span class="n">ClassName</span> <span class="s">"row"</span> <span class="o">]</span> <span class="o">[</span>
            <span class="n">div</span> <span class="o">[</span> <span class="n">ClassName</span> <span class="s">"col"</span> <span class="o">]</span> <span class="o">[</span>
                <span class="n">div</span> <span class="o">[</span> <span class="n">ClassName</span> <span class="s">"card"</span> <span class="o">]</span> <span class="o">[</span>
                    <span class="n">div</span> <span class="o">[</span> <span class="n">ClassName</span> <span class="s">"card-header"</span> <span class="o">]</span> <span class="o">[</span> <span class="n">strong</span> <span class="bp">[]</span> <span class="o">[</span> <span class="n">str</span> <span class="s">"MIDI Test"</span><span class="o">]</span> <span class="o">]</span>
                    <span class="n">div</span> <span class="o">[</span> <span class="n">ClassName</span> <span class="s">"card-body"</span> <span class="o">]</span> <span class="o">[</span>
                        <span class="n">div</span> <span class="o">[</span> <span class="n">ClassName</span> <span class="s">"form-group"</span> <span class="o">]</span> <span class="o">[</span>
                            <span class="n">label</span> <span class="o">[</span> <span class="n">ClassName</span> <span class="s">"col-form-label"</span> <span class="o">]</span> <span class="o">[</span> <span class="n">str</span> <span class="s">"Outputs"</span> <span class="o">]</span>
                            <span class="k">select</span> <span class="o">[</span> <span class="n">ClassName</span> <span class="s">"form-control"</span>
                                     <span class="n">Value</span> <span class="o">(</span><span class="n">model</span><span class="o">.</span><span class="n">SelectedMIDIOutput</span> <span class="o">|&gt;</span> <span class="nn">Option</span><span class="p">.</span><span class="n">defaultValue</span> <span class="s">""</span><span class="o">)</span>
                                     <span class="n">OnChange</span> <span class="o">(</span><span class="k">fun</span> <span class="o">(</span><span class="n">ev</span><span class="o">:</span><span class="nn">React</span><span class="p">.</span><span class="n">FormEvent</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="n">dispatch</span> <span class="o">(</span><span class="n">OutputSelected</span> <span class="o">(!!</span> <span class="n">ev</span><span class="o">.</span><span class="n">target</span><span class="o">?</span><span class="n">value</span><span class="o">)))</span> <span class="o">]</span> <span class="o">[</span>
                                         <span class="k">for</span> <span class="n">key</span><span class="o">,</span> <span class="n">name</span> <span class="k">in</span> <span class="n">model</span><span class="o">.</span><span class="n">MIDIOutputs</span> <span class="k">do</span>
                                            <span class="k">yield</span> <span class="n">option</span> <span class="o">[</span> <span class="n">Key</span> <span class="n">key</span> <span class="o">]</span> <span class="o">[</span> <span class="n">str</span> <span class="n">name</span> <span class="o">]</span>
                                     <span class="o">]</span>
                        <span class="o">]</span>
                    <span class="o">]</span>
                    <span class="n">div</span> <span class="o">[</span> <span class="n">ClassName</span> <span class="s">"card-footer"</span> <span class="o">]</span> <span class="o">[</span>
                        <span class="n">button</span> <span class="o">[</span> <span class="n">ClassName</span> <span class="s">"btn btn-primary"</span>
                                    <span class="n">OnClick</span> <span class="o">(</span><span class="k">fun</span> <span class="o">_</span> <span class="o">-&gt;</span> <span class="n">dispatch</span> <span class="n">SendNote</span><span class="o">)</span> <span class="o">]</span> <span class="o">[</span> <span class="n">str</span> <span class="s">"Send Note"</span> <span class="o">]</span>
                    <span class="o">]</span>
                <span class="o">]</span>
            <span class="o">]</span>

            <span class="n">div</span> <span class="o">[</span> <span class="n">ClassName</span> <span class="s">"col"</span> <span class="o">]</span> <span class="o">[</span>
                <span class="n">div</span> <span class="o">[</span> <span class="n">ClassName</span> <span class="s">"card"</span> <span class="o">]</span> <span class="o">[</span>
                    <span class="n">div</span> <span class="o">[</span> <span class="n">ClassName</span> <span class="s">"card-header"</span> <span class="o">]</span> <span class="o">[</span> <span class="n">strong</span> <span class="bp">[]</span> <span class="o">[</span> <span class="n">str</span> <span class="s">"MIDI Messages"</span><span class="o">]</span> <span class="o">]</span>
                    <span class="n">div</span> <span class="o">[</span> <span class="n">ClassName</span> <span class="s">"card-body"</span> <span class="o">]</span> <span class="o">[</span>
                        <span class="k">for</span> <span class="n">msg</span> <span class="k">in</span> <span class="n">model</span><span class="o">.</span><span class="n">Messages</span> <span class="k">do</span>
                            <span class="k">match</span> <span class="n">msg</span> <span class="k">with</span>
                            <span class="o">|</span> <span class="n">Info</span> <span class="n">msg</span> <span class="o">-&gt;</span> <span class="k">yield</span> <span class="n">div</span> <span class="o">[</span> <span class="n">ClassName</span> <span class="s">"alert alert-info"</span> <span class="o">]</span> <span class="o">[</span> <span class="n">str</span> <span class="n">msg</span> <span class="o">]</span>
                            <span class="o">|</span> <span class="n">Success</span> <span class="n">msg</span> <span class="o">-&gt;</span> <span class="k">yield</span> <span class="n">div</span> <span class="o">[</span> <span class="n">ClassName</span> <span class="s">"alert alert-success"</span> <span class="o">]</span> <span class="o">[</span> <span class="n">str</span> <span class="n">msg</span> <span class="o">]</span>
                            <span class="o">|</span> <span class="n">Warning</span> <span class="n">msg</span> <span class="o">-&gt;</span> <span class="k">yield</span> <span class="n">div</span> <span class="o">[</span> <span class="n">ClassName</span> <span class="s">"alert alert-warning"</span> <span class="o">]</span> <span class="o">[</span> <span class="n">str</span> <span class="n">msg</span> <span class="o">]</span>
                            <span class="o">|</span> <span class="n">Error</span> <span class="n">msg</span> <span class="o">-&gt;</span> <span class="k">yield</span> <span class="n">div</span> <span class="o">[</span> <span class="n">ClassName</span> <span class="s">"alert alert-danger"</span> <span class="o">]</span> <span class="o">[</span> <span class="n">str</span> <span class="n">msg</span> <span class="o">]</span>
                    <span class="o">]</span>
                <span class="o">]</span>
            <span class="o">]</span>
        <span class="o">]</span>
    <span class="o">]</span></code></pre></div>

<p>To make everything work, we need to create our React-Elmish application:</p>

<div class="highlight"><pre><code class="language-fsharp"><span class="k">open</span> <span class="nn">Elmish.React</span>

<span class="nn">Program</span><span class="p">.</span><span class="n">mkProgram</span> <span class="n">init</span> <span class="n">update</span> <span class="n">view</span>
<span class="o">|&gt;</span> <span class="nn">Program</span><span class="p">.</span><span class="n">withReact</span> <span class="s">"midi-app"</span>
<span class="o">|&gt;</span> <span class="nn">Program</span><span class="p">.</span><span class="n">run</span></code></pre></div>

<p>Now, that we have a basic UI running, we come to the interesting part.</p>

<h2 id="creating-fable-bindings-for-web-midi">Creating Fable bindings for Web MIDI</h2>

<p>If we look at the <a href="https://www.w3.org/TR/webmidi/" rel="nofollow" target="_blank">Web MIDI</a> specification we see, that we need to define
a bunch of interfaces. This is a quite straightforward copy of the types
defined in the <a href="https://www.w3.org/TR/webmidi/" rel="nofollow" target="_blank">Web MIDI</a> specification:</p>

<div class="highlight"><pre><code class="language-fsharp"><span class="k">module</span> <span class="nn">WebMIDI</span>

<span class="k">open</span> <span class="nn">Fable.Core</span>
<span class="k">open</span> <span class="nn">Fable.Import</span>

<span class="k">type</span> <span class="nc">MIDIOption</span> <span class="o">=</span>
    <span class="o">|</span> <span class="n">Sysex</span> <span class="k">of</span> <span class="kt">bool</span>

<span class="o">[&lt;</span><span class="n">StringEnum</span><span class="o">&gt;]</span>
<span class="k">type</span> <span class="nc">MIDIPortType</span> <span class="o">=</span>
    <span class="o">|</span> <span class="n">Input</span>
    <span class="o">|</span> <span class="n">Output</span>

<span class="o">[&lt;</span><span class="n">StringEnum</span><span class="o">&gt;]</span>
<span class="k">type</span> <span class="nc">MIDIPortDeviceState</span> <span class="o">=</span>
    <span class="o">|</span> <span class="n">Connected</span>
    <span class="o">|</span> <span class="n">Disconnected</span>

<span class="o">[&lt;</span><span class="n">StringEnum</span><span class="o">&gt;]</span>
<span class="k">type</span> <span class="nc">MIDIPortConnectionState</span> <span class="o">=</span>
    <span class="o">|</span> <span class="n">Open</span>
    <span class="o">|</span> <span class="n">Closed</span>
    <span class="o">|</span> <span class="n">Pending</span>

<span class="k">type</span> <span class="nc">IMIDIPort</span> <span class="o">=</span>
    <span class="k">inherit</span> <span class="nn">Browser</span><span class="p">.</span><span class="n">EventTarget</span>
    <span class="k">abstract</span> <span class="k">member</span> <span class="n">id</span><span class="o">:</span> <span class="kt">string</span> <span class="k">with</span> <span class="n">get</span>
    <span class="k">abstract</span> <span class="k">member</span> <span class="n">manufacturer</span><span class="o">:</span> <span class="kt">string</span> <span class="n">option</span> <span class="k">with</span> <span class="n">get</span>
    <span class="k">abstract</span> <span class="k">member</span> <span class="n">name</span><span class="o">:</span> <span class="kt">string</span> <span class="n">option</span> <span class="k">with</span> <span class="n">get</span>
    <span class="o">[&lt;</span><span class="n">Emit</span><span class="o">(</span><span class="s">"$0.type"</span><span class="o">)&gt;]</span>
    <span class="k">abstract</span> <span class="k">member</span> <span class="n">Type</span><span class="o">:</span> <span class="n">MIDIPortType</span> <span class="k">with</span> <span class="n">get</span>
    <span class="k">abstract</span> <span class="k">member</span> <span class="n">version</span><span class="o">:</span> <span class="kt">string</span> <span class="n">option</span> <span class="k">with</span> <span class="n">get</span>
    <span class="k">abstract</span> <span class="k">member</span> <span class="n">state</span><span class="o">:</span> <span class="n">MIDIPortDeviceState</span> <span class="k">with</span> <span class="n">get</span>
    <span class="k">abstract</span> <span class="k">member</span> <span class="n">connection</span><span class="o">:</span> <span class="n">MIDIPortConnectionState</span> <span class="k">with</span> <span class="n">get</span>
    <span class="k">abstract</span> <span class="k">member</span> <span class="n">onstatechange</span><span class="o">:</span> <span class="o">(</span><span class="n">IMIDIConnectionEvent</span> <span class="o">-&gt;</span> <span class="kt">unit</span><span class="o">)</span> <span class="k">with</span> <span class="n">set</span>
    <span class="o">[&lt;</span><span class="n">Emit</span><span class="o">(</span><span class="s">"$0.open"</span><span class="o">)&gt;]</span>
    <span class="k">abstract</span> <span class="k">member</span> <span class="n">Open</span> <span class="o">:</span> <span class="kt">unit</span> <span class="o">-&gt;</span> <span class="nn">JS</span><span class="p">.</span><span class="n">Promise</span><span class="o">&lt;</span><span class="n">IMIDIPort</span><span class="o">&gt;</span>
    <span class="k">abstract</span> <span class="k">member</span> <span class="n">close</span> <span class="o">:</span> <span class="kt">unit</span> <span class="o">-&gt;</span> <span class="nn">JS</span><span class="p">.</span><span class="n">Promise</span><span class="o">&lt;</span><span class="n">IMIDIPort</span><span class="o">&gt;</span>

<span class="ow">and</span> <span class="n">IMIDIConnectionEvent</span> <span class="o">=</span>
    <span class="k">inherit</span> <span class="nn">Browser</span><span class="p">.</span><span class="n">EventType</span>
    <span class="k">abstract</span> <span class="k">member</span> <span class="n">port</span> <span class="o">:</span> <span class="n">IMIDIPort</span> <span class="k">with</span> <span class="n">get</span>

<span class="k">type</span> <span class="nc">IMIDIOutput</span> <span class="o">=</span>
    <span class="k">inherit</span> <span class="n">IMIDIPort</span>
    <span class="k">abstract</span> <span class="k">member</span> <span class="n">send</span> <span class="o">:</span> <span class="kt">byte</span> <span class="n">array</span> <span class="o">-&gt;</span> <span class="kt">unit</span>
    <span class="o">[&lt;</span><span class="n">Emit</span><span class="o">(</span><span class="s">"$0.send($2, $1)"</span><span class="o">)&gt;]</span>
    <span class="k">abstract</span> <span class="k">member</span> <span class="n">SendAt</span> <span class="o">:</span> <span class="kt">float</span> <span class="o">-&gt;</span> <span class="kt">byte</span> <span class="n">array</span> <span class="o">-&gt;</span> <span class="kt">unit</span>
    <span class="k">abstract</span> <span class="k">member</span> <span class="n">clear</span> <span class="o">:</span> <span class="kt">unit</span> <span class="o">-&gt;</span> <span class="kt">unit</span>

<span class="k">type</span> <span class="nc">IMIDIOutputMap</span> <span class="o">=</span> <span class="nn">JS</span><span class="p">.</span><span class="n">Map</span><span class="o">&lt;</span><span class="kt">string</span><span class="o">,</span> <span class="n">IMIDIOutput</span><span class="o">&gt;</span>

<span class="k">type</span> <span class="nc">IMIDIMessageEvent</span> <span class="o">=</span>
    <span class="k">inherit</span> <span class="nn">Browser</span><span class="p">.</span><span class="n">EventType</span>
    <span class="k">abstract</span> <span class="k">member</span> <span class="n">receivedTime</span><span class="o">:</span> <span class="kt">double</span>
    <span class="k">abstract</span> <span class="k">member</span> <span class="n">data</span><span class="o">:</span> <span class="kt">byte</span> <span class="n">array</span>

<span class="k">type</span> <span class="nc">IMIDIInput</span> <span class="o">=</span>
    <span class="k">inherit</span> <span class="n">IMIDIPort</span>
    <span class="k">abstract</span> <span class="k">member</span> <span class="n">onmidimessage</span> <span class="o">:</span> <span class="o">(</span><span class="n">IMIDIMessageEvent</span> <span class="o">-&gt;</span> <span class="kt">unit</span><span class="o">)</span> <span class="k">with</span> <span class="n">set</span>

<span class="k">type</span> <span class="nc">IMIDIInputMap</span> <span class="o">=</span> <span class="nn">JS</span><span class="p">.</span><span class="n">Map</span><span class="o">&lt;</span><span class="kt">string</span><span class="o">,</span> <span class="n">IMIDIInput</span><span class="o">&gt;</span>

<span class="k">type</span> <span class="nc">IMIDIAccess</span> <span class="o">=</span>
    <span class="k">inherit</span> <span class="nn">Browser</span><span class="p">.</span><span class="n">EventTarget</span>
    <span class="k">abstract</span> <span class="k">member</span> <span class="n">inputs</span> <span class="o">:</span> <span class="n">IMIDIInputMap</span> <span class="k">with</span> <span class="n">get</span>
    <span class="k">abstract</span> <span class="k">member</span> <span class="n">outputs</span> <span class="o">:</span> <span class="n">IMIDIOutputMap</span> <span class="k">with</span> <span class="n">get</span>
    <span class="k">abstract</span> <span class="k">member</span> <span class="n">onstatechange</span> <span class="o">:</span> <span class="o">(</span><span class="n">IMIDIConnectionEvent</span> <span class="o">-&gt;</span> <span class="kt">unit</span><span class="o">)</span> <span class="k">with</span> <span class="n">set</span>
    <span class="k">abstract</span> <span class="k">member</span> <span class="n">sysexEnabled</span><span class="o">:</span> <span class="kt">bool</span> <span class="k">with</span> <span class="n">get</span>

<span class="k">type</span> <span class="nc">MIDISuccessCallback</span> <span class="o">=</span> <span class="n">IMIDIAccess</span> <span class="o">*</span> <span class="n">MIDIOption</span> <span class="o">-&gt;</span> <span class="kt">unit</span></code></pre></div>

<p>However, there are some specialities:</p>

<ul>
  <li>The <code>MIDIOption</code> is not modelled as an object but as a discriminated union. A list of <code>MIDIOption</code> elements will be later converted via <code>keyValueList</code> into a JS object.</li>
  <li>
<code>MIDIPortType</code>, <code>MIDIPortDeviceState</code> and <code>MIDIPortConnectionState</code> are in JavaScript just strings but with some predefined values. For a better type safety they are here union types with the <code>[&lt;StringEnum&gt;]</code> attribute, which makes fable to compile these values to strings in JS.</li>
  <li>Nullable DOMStrings (DOMString? in the specification) map to optional values</li>
  <li>Promises map to <code>Fable.Import.JS.Promise&lt;'a&gt;</code>
</li>
  <li>MapLike elements to <code>Fable.Import.JS.Map&lt;'key,'value&gt;</code>
</li>
  <li>
<code>UInt8Array</code>s will be represented here by <code>byte array</code>
</li>
  <li>The hardest part was to figure out, how to get the event handlers working correctly. I found, the easiest way was to make a property, where we can set a function as handler</li>
  <li>Some members (like <code>IMIDIPort.type</code> or <code>IMIDIPort.open</code>) I had to write differently, as they are keywords in F#. To the rescue comes here the <code>[&lt;Emit()&gt;]</code> attribute, which is used hint fable how to output the JavaScript for this calls.</li>
</ul>

<p>Now we need a way to get access to the MIDI functionality of the browser. This is what is <code>navigator.requestMIDIAccess()</code> is for. If we want to send SysEx messages then we have to call `navigator.requestMIDIAccess({ sysex: true }).
This is the matching fable code:</p>

<div class="highlight"><pre><code class="language-fsharp"><span class="k">module</span> <span class="nn">internal</span> <span class="n">Intern</span> <span class="o">=</span>

    <span class="o">[&lt;</span><span class="n">Emit</span><span class="o">(</span><span class="s">"navigator.requestMIDIAccess($0)"</span><span class="o">)&gt;]</span>
    <span class="k">let</span> <span class="nv">requestAccess</span> <span class="o">(</span><span class="n">options</span> <span class="o">:</span> <span class="kt">obj</span><span class="o">)</span> <span class="o">:</span> <span class="nn">JS</span><span class="p">.</span><span class="n">Promise</span><span class="o">&lt;</span><span class="n">IMIDIAccess</span><span class="o">&gt;</span> <span class="o">=</span> <span class="n">jsNative</span>

<span class="k">open</span> <span class="nn">Fable.PowerPack</span>

<span class="o">[&lt;</span><span class="n">RequireQualifiedAccess</span><span class="o">&gt;]</span>
<span class="k">module</span> <span class="nn">MIDI</span> <span class="o">=</span>
    <span class="k">let</span> <span class="nv">requestAccess</span> <span class="o">(</span><span class="n">options</span> <span class="o">:</span> <span class="n">MIDIOption</span> <span class="kt">list</span><span class="o">)</span> <span class="o">:</span> <span class="nn">JS</span><span class="p">.</span><span class="n">Promise</span><span class="o">&lt;</span><span class="n">IMIDIAccess</span><span class="o">&gt;</span> <span class="o">=</span>
        <span class="nn">Intern</span><span class="p">.</span><span class="n">requestAccess</span> <span class="o">(</span><span class="nn">JsInterop</span><span class="p">.</span><span class="n">keyValueList</span> <span class="nn">CaseRules</span><span class="p">.</span><span class="n">LowerFirst</span> <span class="n">options</span><span class="o">)</span></code></pre></div>

<p>The real request is hidden in an internal module and the MIDI module is decorated with a <code>[&lt;RequireQualifiedAccess&gt;]</code> attribute, so we can force the user to call this via <code>MIDI.requestAccess</code>. Also the user has to give a list of <code>MIDIOption</code> as parameter, which is then converted via <code>JsInterop.keyValueList</code> to a JSON object.</p>

<p>So how ist this API used in our application?</p>

<p>The first we do is to change our <code>init ()</code> function to return a new command from the promise, which is returned from <code>MIDI.requestAccess</code>:</p>

<div class="highlight"><pre><code class="language-fsharp"><span class="k">let</span> <span class="nv">init</span> <span class="bp">()</span> <span class="o">:</span> <span class="n">Model</span><span class="o">*</span><span class="n">Cmd</span><span class="o">&lt;</span><span class="n">Msg</span><span class="o">&gt;</span> <span class="o">=</span>
    <span class="o">{</span> <span class="n">MIDIOutputs</span> <span class="o">=</span> <span class="bp">[]</span>
      <span class="n">SelectedMIDIOutput</span> <span class="o">=</span> <span class="n">None</span>
      <span class="n">MIDIAccess</span> <span class="o">=</span> <span class="n">None</span>
      <span class="n">IsMIDIEnabled</span> <span class="o">=</span> <span class="k">false</span>
      <span class="n">Messages</span> <span class="o">=</span> <span class="bp">[]</span> <span class="o">},</span> <span class="nn">Cmd</span><span class="p">.</span><span class="n">ofPromise</span> <span class="nn">MIDI</span><span class="p">.</span><span class="n">requestAccess</span> <span class="o">[</span> <span class="n">Sysex</span> <span class="k">true</span> <span class="o">]</span> <span class="n">MIDIConnected</span> <span class="n">MIDIError</span></code></pre></div>

<p>This calls <code>MIDI.requestAccess</code> on the start of the application (a.k.a. browser reload) and sends a <code>MIDIConnected</code> message on success or a <code>MIDIError</code> message on error. In the update function this message is then used to set
the <code>IsMIDIEnabled</code> and the <code>MIDIAccess</code> settings in the model accordingly. On Success also a <code>MIDIStateChange</code> message is send, as we now want to populate our output box with MIDI outputs. I also added helper methods for the Messages, which go to the list on the right side:</p>

<div class="highlight"><pre><code class="language-fsharp"><span class="k">let</span> <span class="nv">update</span> <span class="o">(</span><span class="n">msg</span><span class="o">:</span><span class="n">Msg</span><span class="o">)</span> <span class="o">(</span><span class="n">model</span><span class="o">:</span><span class="n">Model</span><span class="o">)</span> <span class="o">:</span> <span class="n">Model</span><span class="o">*</span><span class="n">Cmd</span><span class="o">&lt;</span><span class="n">Msg</span><span class="o">&gt;</span> <span class="o">=</span>
    <span class="k">let</span> <span class="nv">success</span> <span class="o">=</span> <span class="n">Success</span> <span class="o">&gt;&gt;</span> <span class="n">Message</span> <span class="o">&gt;&gt;</span> <span class="nn">Cmd</span><span class="p">.</span><span class="n">ofMsg</span>
    <span class="k">let</span> <span class="nv">info</span> <span class="o">=</span> <span class="n">Info</span> <span class="o">&gt;&gt;</span> <span class="n">Message</span> <span class="o">&gt;&gt;</span> <span class="nn">Cmd</span><span class="p">.</span><span class="n">ofMsg</span>
    <span class="k">let</span> <span class="nv">error</span> <span class="o">=</span> <span class="n">Error</span> <span class="o">&gt;&gt;</span> <span class="n">Message</span> <span class="o">&gt;&gt;</span> <span class="nn">Cmd</span><span class="p">.</span><span class="n">ofMsg</span>

    <span class="k">match</span> <span class="n">msg</span> <span class="k">with</span>
    <span class="o">...</span>
    <span class="o">|</span> <span class="n">MIDIStateChange</span> <span class="o">-&gt;</span>
        <span class="k">let</span> <span class="nv">outputs</span> <span class="o">=</span>
            <span class="k">match</span> <span class="n">model</span><span class="o">.</span><span class="n">MIDIAccess</span> <span class="k">with</span>
            <span class="o">|</span> <span class="n">Some</span> <span class="n">midiAccess</span> <span class="o">-&gt;</span>
                <span class="n">midiAccess</span><span class="o">.</span><span class="n">outputs</span>
                <span class="o">|&gt;</span> <span class="nn">JSMap</span><span class="p">.</span><span class="n">toList</span>
                <span class="o">|&gt;</span> <span class="nn">List</span><span class="p">.</span><span class="n">map</span> <span class="o">(</span><span class="k">fun</span> <span class="o">(</span><span class="n">key</span><span class="o">,</span> <span class="n">o</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="n">key</span><span class="o">,</span> <span class="o">(</span><span class="n">o</span><span class="o">.</span><span class="n">name</span> <span class="o">|&gt;</span> <span class="nn">Option</span><span class="p">.</span><span class="n">defaultValue</span> <span class="s">"?"</span><span class="o">))</span>
            <span class="o">|</span> <span class="n">None</span> <span class="o">-&gt;</span> <span class="bp">[]</span>

        <span class="k">let</span> <span class="nv">selectedOutput</span> <span class="o">=</span>
            <span class="k">match</span> <span class="n">outputs</span> <span class="k">with</span>
            <span class="o">|</span> <span class="o">(</span><span class="n">key</span><span class="o">,</span> <span class="o">_)::_</span> <span class="o">-&gt;</span> <span class="n">Some</span> <span class="n">key</span>
            <span class="o">|</span> <span class="o">_</span> <span class="o">-&gt;</span> <span class="n">None</span>

        <span class="o">{</span> <span class="n">model</span> <span class="k">with</span> <span class="n">MIDIOutputs</span> <span class="o">=</span> <span class="n">outputs</span>
                     <span class="n">SelectedMIDIOutput</span> <span class="o">=</span> <span class="n">selectedOutput</span> <span class="o">},</span> <span class="n">info</span> <span class="s">"State changed"</span>
    <span class="o">|</span> <span class="o">...</span></code></pre></div>

<p>For the easier handling of JS.Maps I wrote a litte helper function <code>JSMap.toList</code> which converts a <code>JS.Map&lt;'key, 'value&gt;</code> into a list of tuples:</p>

<div class="highlight"><pre><code class="language-fsharp"><span class="o">[&lt;</span><span class="n">RequireQualifiedAccess</span><span class="o">&gt;]</span>
<span class="k">module</span> <span class="nn">JSMap</span> <span class="o">=</span>
    <span class="k">let</span> <span class="nv">toList</span> <span class="o">(</span><span class="n">m</span><span class="o">:</span> <span class="nn">JS</span><span class="p">.</span><span class="n">Map</span><span class="o">&lt;</span><span class="k">'</span><span class="n">key</span><span class="o">,</span> <span class="k">'</span><span class="n">value</span><span class="o">&gt;):</span> <span class="o">(</span><span class="k">'</span><span class="n">key</span> <span class="o">*</span> <span class="k">'</span><span class="n">value</span><span class="o">)</span> <span class="kt">list</span> <span class="o">=</span>
        <span class="k">let</span> <span class="nv">mutable</span> <span class="n">result</span> <span class="o">=</span> <span class="bp">[]</span>
        <span class="n">m</span><span class="o">.</span><span class="n">forEach</span> <span class="o">(</span><span class="k">fun</span> <span class="n">value</span> <span class="n">key</span> <span class="o">_</span> <span class="o">-&gt;</span> <span class="n">result</span> <span class="o">&lt;-</span> <span class="o">(</span><span class="n">key</span><span class="o">,</span> <span class="n">value</span><span class="o">)::</span><span class="n">result</span><span class="o">)</span>
        <span class="n">result</span></code></pre></div>

<p>Until now we get only at the start of the app a list of MIDI outputs. What we want, is a dynamic reload of the outputs list, when a new output is added or removed. So enter subscriptions:</p>

<div class="highlight"><pre><code class="language-fsharp"><span class="k">let</span> <span class="nv">update</span> <span class="o">(</span><span class="n">msg</span><span class="o">:</span><span class="n">Msg</span><span class="o">)</span> <span class="o">(</span><span class="n">model</span><span class="o">:</span><span class="n">Model</span><span class="o">)</span> <span class="o">:</span> <span class="n">Model</span><span class="o">*</span><span class="n">Cmd</span><span class="o">&lt;</span><span class="n">Msg</span><span class="o">&gt;</span> <span class="o">=</span>
    <span class="o">...</span>

    <span class="k">match</span> <span class="n">msg</span> <span class="k">with</span>
    <span class="o">|</span> <span class="n">MIDIConnected</span> <span class="n">midiAccess</span> <span class="o">-&gt;</span>
        <span class="k">let</span> <span class="nv">stateChangeSub</span> <span class="n">dispatch</span> <span class="o">=</span>
            <span class="n">midiAccess</span><span class="o">.</span><span class="n">onstatechange</span> <span class="o">&lt;-</span> <span class="o">(</span><span class="k">fun</span> <span class="o">(</span><span class="n">ev</span><span class="o">:</span><span class="n">IMIDIConnectionEvent</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="o">(</span><span class="n">dispatch</span> <span class="n">MIDIStateChange</span><span class="o">))</span>

        <span class="o">{</span> <span class="n">model</span> <span class="k">with</span> <span class="n">MIDIAccess</span> <span class="o">=</span> <span class="n">Some</span> <span class="n">midiAccess</span>
                     <span class="n">IsMIDIEnabled</span> <span class="o">=</span> <span class="k">true</span> <span class="o">},</span> <span class="nn">Cmd</span><span class="p">.</span><span class="n">batch</span> <span class="o">[</span> <span class="n">success</span> <span class="s">"MIDI connected"</span>
                                                         <span class="nn">Cmd</span><span class="p">.</span><span class="n">ofSub</span> <span class="n">stateChangeSub</span>
                                                         <span class="nn">Cmd</span><span class="p">.</span><span class="n">ofMsg</span> <span class="n">MIDIStateChange</span> <span class="o">]</span></code></pre></div>

<p>If MIDI was successfully initialized, we add an event handler on the <code>MIDIAccess.onstatechange</code> event, which publishes a new <code>MIDIStateChange</code> event to our app. So everytime the state change event is fired, the list of outputs will be updated.
The results looks something like this:</p>

<p><img src="/img/posts/a-fable-of-webmidi/screen.gif" alt="Screen grab MIDIStateChange"></p>

<p>The last puzzle piece is now sending a note event to the MIDI device:</p>

<div class="highlight"><pre><code class="language-fsharp"><span class="k">let</span> <span class="nv">sendNote</span> <span class="o">(</span><span class="n">midiAccess</span><span class="o">:</span> <span class="n">IMIDIAccess</span><span class="o">)</span> <span class="n">portId</span> <span class="o">=</span>
    <span class="k">let</span> <span class="nv">output</span> <span class="o">=</span> <span class="n">midiAccess</span><span class="o">.</span><span class="n">outputs</span><span class="o">.</span><span class="n">get</span><span class="o">(</span><span class="n">portId</span><span class="o">);</span>

    <span class="c1">// note on, middle C, full velocity</span>
    <span class="k">let</span> <span class="nv">noteOnMessage</span> <span class="o">=</span> <span class="o">[|</span> <span class="mi">0</span><span class="n">x90uy</span><span class="o">;</span> <span class="mi">60uy</span><span class="o">;</span> <span class="mi">0</span><span class="n">x7fuy</span> <span class="o">|]</span>

    <span class="c1">// note off, middle C, release velocity = 64</span>
    <span class="k">let</span> <span class="nv">noteOffMessage</span> <span class="o">=</span> <span class="o">[|</span> <span class="mi">0</span><span class="n">x80uy</span><span class="o">;</span> <span class="mi">60uy</span><span class="o">;</span> <span class="mi">0</span><span class="n">x40uy</span> <span class="o">|]</span>

    <span class="c1">//omitting the timestamp means send immediately.</span>
    <span class="n">output</span><span class="o">.</span><span class="n">send</span> <span class="n">noteOnMessage</span>

    <span class="c1">// timestamp = now + 1000ms.</span>
    <span class="n">noteOffMessage</span> <span class="o">|&gt;</span> <span class="n">output</span><span class="o">.</span><span class="n">SendAt</span> <span class="o">(</span><span class="nn">Browser</span><span class="p">.</span><span class="n">window</span><span class="o">.</span><span class="n">performance</span><span class="o">.</span><span class="n">now</span><span class="bp">()</span> <span class="o">+</span> <span class="mi">1000</span><span class="o">.</span><span class="mi">0</span><span class="o">)</span></code></pre></div>

<p>At last we call it in the update function:</p>

<div class="highlight"><pre><code class="language-fsharp"><span class="k">let</span> <span class="nv">update</span> <span class="o">(</span><span class="n">msg</span><span class="o">:</span><span class="n">Msg</span><span class="o">)</span> <span class="o">(</span><span class="n">model</span><span class="o">:</span><span class="n">Model</span><span class="o">)</span> <span class="o">:</span> <span class="n">Model</span><span class="o">*</span><span class="n">Cmd</span><span class="o">&lt;</span><span class="n">Msg</span><span class="o">&gt;</span> <span class="o">=</span>
    <span class="o">...</span>

    <span class="k">match</span> <span class="n">msg</span> <span class="k">with</span>
    <span class="o">...</span>
    <span class="o">|</span> <span class="n">SendNote</span> <span class="o">-&gt;</span>
        <span class="k">match</span> <span class="n">model</span><span class="o">.</span><span class="n">MIDIAccess</span><span class="o">,</span> <span class="n">model</span><span class="o">.</span><span class="n">SelectedMIDIOutput</span> <span class="k">with</span>
        <span class="o">|</span> <span class="n">Some</span> <span class="n">midi</span><span class="o">,</span> <span class="n">Some</span> <span class="n">out</span> <span class="o">-&gt;</span>
            <span class="n">model</span><span class="o">,</span> <span class="nn">Cmd</span><span class="p">.</span><span class="n">ofFunc</span> <span class="o">(</span><span class="n">sendNote</span> <span class="n">midi</span><span class="o">)</span>
                              <span class="n">out</span>
                              <span class="o">(</span><span class="k">fun</span> <span class="o">_</span> <span class="o">-&gt;</span> <span class="n">Message</span> <span class="o">(</span><span class="n">Success</span> <span class="s">"sent"</span><span class="o">))</span>
                              <span class="o">(</span><span class="k">fun</span> <span class="n">ex</span> <span class="o">-&gt;</span> <span class="n">Message</span> <span class="o">(</span><span class="n">Error</span> <span class="n">ex</span><span class="o">.</span><span class="n">Message</span><span class="o">))</span>
        <span class="o">|</span> <span class="n">Some</span> <span class="o">_,</span> <span class="n">None</span> <span class="o">-&gt;</span> <span class="n">model</span><span class="o">,</span> <span class="n">error</span> <span class="s">"No Output"</span>
        <span class="o">|</span> <span class="o">_,</span> <span class="o">_</span> <span class="o">-&gt;</span> <span class="n">model</span><span class="o">,</span> <span class="n">error</span> <span class="s">"No MIDI connection"</span></code></pre></div>

<p>with the following result:</p>

<p><img src="/img/posts/a-fable-of-webmidi/screen2.gif" alt='Screen grab "Send Note"'></p>

<h2 id="conclusion">Conclusion</h2>

<p>It is not that hard to write bindings for fable, which are nice to use from the F# side.
The complete source code for this post can be found at http://github.com/magicmonty/fable-webmidi-sample.</p>

<p>A more complex version, which is a Patch-Editor for the <a href="http://www.korg.com/products/dj/volca_fm/" rel="nofollow" target="_blank">Korg Volca FM</a> can be found <a href="http://magicmonty.github.com/volca-fm-editor/" rel="nofollow" target="_blank">here</a>.</p>

<p>I also released a NuGet package with the <a href="https://www.w3.org/TR/webmidi/" rel="nofollow" target="_blank">Web MIDI</a> bindings for <a href="http://fable.io" rel="nofollow" target="_blank">Fable</a>. The source code can be found at <a href="https://github.com/magicmonty/fable-import-webmidi" rel="nofollow" target="_blank">https://github.com/magicmonty/fable-import-webmidi</a> and the package at <a href="https://nuget.org/packages/Fable.Import.WebMIDI" rel="nofollow" target="_blank">https://nuget.org/packages/Fable.Import.WebMIDI</a></p>

<p>I would like to thank the awesome fable community for the help to get oversome of the non obvious stuff.</p>


  </div>
  <div class="metainfo">
    
    <ul class="list-unstyled media">
      <li>
<a href="//twitter.com/home?status=A%20fable%20of%20Web%20MIDI+-+http://blog.pagansoft.de/articles/a-fable-of-webmidi/" target="_blank" data-toggle="tooltip" class="icon social-icons-small-twitter" data-original-title="Share this article on Twitter"><span>Share this article on Twitter</span></a>
      </li>
<li>
<a href="//www.facebook.com/share.php?u=http://blog.pagansoft.de/articles/a-fable-of-webmidi/&amp;t=A%20fable%20of%20Web%20MIDI" target="_blank" data-toggle="tooltip" class="icon social_icons_small-facebook" data-original-title="Share this article on Facebook"><span>Share this article on Facebook</span></a>
      </li>
<li>
<a href="//www.xing.com/spi/shares/new?url=http://blog.pagansoft.de/articles/a-fable-of-webmidi/" target="_blank" data-toggle="tooltip" class="icon social-icons-small-xing" data-original-title="Share this article on Xing"><span>Share this article on Xing</span></a>
      </li>
<li>
<a href="//www.linkedin.com/shareArticle?mini=true&amp;ro=false&amp;trk=bookmarklet&amp;title=A%20fable%20of%20Web%20MIDI&amp;url=http://blog.pagansoft.de/articles/a-fable-of-webmidi/" target="_blank" data-toggle="tooltip" class="icon social-icons-small-linkedin" data-original-title="Share this article on LinkedIn"><span>Share this article on LinkedIn</span></a>
    </li>
</ul>
    This article was written by<span itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta content="//plus.google.com/+MartinGondermann/" itemprop="url">
<a href="/pages/about.html" rel="author"><span itemprop="name">Martin Gondermann</span></a></span>
 on 2017-12-09 in 
<a href="/categories/how-to.html" rel="tag">How-To</a>, <a href="/categories/.net.html" rel="tag">.Net</a>, <a href="/categories/fsharp.html" rel="tag">FSharp</a>, <a href="/categories/fable.html" rel="tag">Fable</a>, <a href="/categories/react.html" rel="tag">React</a>, <a href="/categories/elmish.html" rel="tag">Elmish</a>, and <a href="/categories/midi.html" rel="tag">MIDI</a>
.
  </div>
  <div id="disqus_thread"></div>
</article>
<script type="text/javascript">
  var disqus_config = function () {
    this.page.url = http://blog.pagansoft.de/articles/a-fable-of-webmidi/;
    this.page.identifier = a-fable-of-webmidi;
  }

  (function() { // DON'T EDIT BELOW THIS LINE
    var d = document, s = d.createElement('script');
    s.src = '//pagansoft.disqus.com/embed.js';
    s.setAttribute('data-timestamp', +new Date());
    (d.head || d.body).appendChild(s);
  })();
</script>
<noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a>
</noscript>
<script src="//apis.google.com/js/plusone.js"></script>

        </div>
        <div id="sidebar_right" class="col-md-3 sidebar visible-lg">
          <div class="widget hidden-md">
  <h3>Github repositories</h3>
  <div class="content">
    <div class="github-repos">
      <ul>
        <li><a href="http://github.com/magicmonty/sonicpi.nvim" title="sonicpi.nvim" rel="popover" data-placement="top" data-trigger="hover" data-content="A neovim plugin for Sonic Pi" class="github_link" target="_blank">sonicpi.nvim</a>
        <li><a href="http://github.com/magicmonty/SharpFun" title="SharpFun" rel="popover" data-placement="top" data-trigger="hover" data-content="Functional Data Types for C#" class="github_link" target="_blank">SharpFun</a>
        <li><a href="http://github.com/magicmonty/bash-git-prompt" title="bash-git-prompt" rel="popover" data-placement="top" data-trigger="hover" data-content="An informative and fancy bash prompt for Git users" class="github_link" target="_blank">bash-git-prompt</a>
        <li><a href="http://github.com/magicmonty/FizzBuzzKata-csharp" title="FizzBuzzKata-csharp" rel="popover" data-placement="top" data-trigger="hover" data-content="FizzBuzz kata project for Xamarin Studio" class="github_link" target="_blank">FizzBuzzKata-csharp</a>
        <li><a href="http://github.com/magicmonty/gildedrose_kata_monodevelop" title="gildedrose_kata_monodevelop" rel="popover" data-placement="top" data-trigger="hover" data-content="Start project for the Gilded Rose Kata for MonoDevelop" class="github_link" target="_blank">gildedrose_kata_monodevelop</a>
        <li><a href="http://github.com/magicmonty/wintersmith-uglifyjs" title="wintersmith-uglifyjs" rel="popover" data-placement="top" data-trigger="hover" data-content="Plugin for Wintersmith, which combines and compresses all configured js files into a single file" class="github_link" target="_blank">wintersmith-uglifyjs</a>
        <li><a href="http://github.com/magicmonty/marsrover-kata-delphi" title="marsrover-kata-delphi" rel="popover" data-placement="top" data-trigger="hover" data-content="Mars Rover Kata in Delphi" class="github_link" target="_blank">marsrover-kata-delphi</a>
        <li><a href="http://github.com/magicmonty/activesync-go" title="activesync-go" rel="popover" data-placement="top" data-trigger="hover" data-content="ActiveSync implementation for Google Go" class="github_link" target="_blank">activesync-go</a>
        <li><a href="http://github.com/magicmonty/wbxml-go" title="wbxml-go" rel="popover" data-placement="top" data-trigger="hover" data-content="WBXML encoder/decoder implementation for Google Go" class="github_link" target="_blank">wbxml-go</a>
        <li><a href="http://github.com/magicmonty/autotest4delphi" title="autotest4delphi" rel="popover" data-placement="top" data-trigger="hover" data-content="Application to run DUnit tests automatically on change" class="github_link" target="_blank">autotest4delphi</a>
        <li><a href="http://github.com/magicmonty/gildedrose_kata_delphi" title="gildedrose_kata_delphi" rel="popover" data-placement="top" data-trigger="hover" data-content="Start project for the Gilded Rose Kata in Delphi" class="github_link" target="_blank">gildedrose_kata_delphi</a>
        <li><a href="http://github.com/magicmonty/videostore_delphi" title="videostore_delphi" rel="popover" data-placement="top" data-trigger="hover" data-content="The videostore example from Martin Fowler's Refactoring, and from Episode 3 of cleancoders.com in Delphi" class="github_link" target="_blank">videostore_delphi</a>
        <li><a href="http://github.com/magicmonty/MediaWikiAccessControl" title="MediaWikiAccessControl" rel="popover" data-placement="top" data-trigger="hover" data-content="Group based AccessControl for selected MediaWiki pages" class="github_link" target="_blank">MediaWikiAccessControl</a>
        
      </ul>
    </div>
  </div>
</div>

          <div class="widget hidden-md">
  <h3>Links</h3>
  <div class="content">
    <ul class="links">
      <li><a href="http://lambdaphonic.de" data-toggle="tooltip" target="_blank" title="λphonic">λphonic</a>
      <li><a href="http://www.softwerkskammer.de" data-toggle="tooltip" target="_blank" title="Softwerkskammer">Softwerkskammer</a>
      <li><a href="http://www.torstenpahl.de" data-toggle="tooltip" target="_blank" title="Torsten Pahl - Zauberkünstler">Torsten Pahl - Zauberkünstler</a>
      
    </ul>
  </div>
</div>

        </div>
      </div>
      <div class="row">
        <footer class="col-md-12">&copy; 2022 by pagansoft.de</footer>
      </div>
    </div>
    <script src="/js/default.js"></script>
    <script>
      /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
      var disqus_shortname = 'pagansoft'; // required: replace example with your forum shortname
      /* * * DON'T EDIT BELOW THIS LINE * * */
      (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = '//' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
      }());
    </script>
  </body>
</html>
