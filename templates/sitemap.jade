mixin getLastModified(date)
	- var dateString = date.getFullYear() + "-"
	if (date.getMonth() + 1) < 10
		- dateString += "0"
	- dateString += (date.getMonth() + 1) + "-"
	if date.getDate() < 10
		- dateString += "0"
	- dateString += date.getDate() + "T"
	if date.getHours() < 10
		- dateString += "0"
	- dateString += date.getHours() + ":"
	if date.getMinutes() < 10
		- dateString += "0"
	- dateString += date.getMinutes() + ":"
	if date.getSeconds() < 10
		- dateString += "0"
	- dateString += date.getSeconds() + "+02:00"
	lastmod= dateString

doctype xml
| <?xml-stylesheet type="text/xsl" href="/css/sitemap.xsl"?>
urlset(xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance", 
	xsi:schemaLocation="http://www.sitemaps.org/schemas/sitemap/0.9 http://www.sitemaps.org/schemas/sitemap/0.9/sitemap.xsd", 
	xmlns="http://www.sitemaps.org/schemas/sitemap/0.9")
	- var articles = _.chain(contents.articles._.directories).map(function(item) {
	-	return item.index
	- }).compact().sortBy(function(item) {
	-	return -item.date
	- }).value()
	- var categories = contents.categories;
	url
		loc= locals.url
		+getLastModified(articles[0].date)
		changefreq daily
		priority 1.0
	url
		loc http://blog.pagansoft.de/pages/about/
		lastmod 2012-10-03T12:58:00+02:00
		changefreq monthly
		priority 0.2
	for article in articles
		- var permalink = locals.url + article.url
		url
			loc= permalink
			+getLastModified(article.date)
			changefreq monthly
			priority 0.2
	for category in categories
		- var permalink = locals.url + '/categories/' + category.metadata.meta.category.toLowerCase().replace(/[ _]/g, "-") + '.html'
		- var date = new Date(0)
		for article in articles
			if article.metadata.category
				each acat in article.metadata.category.split(",")
					if category.metadata.meta.category == acat
						if article.date > date
							- date = article.date
						- break
		if !date
			- date = new Date()
		url
			loc= permalink
			+getLastModified(date)
			changefreq weekly
			priority 0.3
